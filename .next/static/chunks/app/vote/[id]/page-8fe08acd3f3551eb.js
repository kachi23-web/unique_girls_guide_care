(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[752],{3261:function(e,t,r){Promise.resolve().then(r.bind(r,2421))},2421:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var l=r(7437),s=r(2265),n=r(9376),a=r(3516),i=r(353),o=r(6050),c=r(166),d=r(3145),u=r(8997),f=r(9345),m=r(1217);let h=(0,c.default)(()=>Promise.all([r.e(655),r.e(464)]).then(r.bind(r,7464)),{loadableGenerated:{webpack:()=>[7464]},ssr:!1});function x(e){let{params:t}=e,r=(0,n.useRouter)(),[c,x]=(0,s.useState)(null),[p,g]=(0,s.useState)(""),[b,v]=(0,s.useState)(1),[y,j]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{try{let e=await (0,o.ug)(parseInt(t.id));x(e)}catch(e){console.error("Error fetching chef:",e),a.ZP.error("Failed to load chef data. Please try again.")}finally{j(!1)}})()},[t.id]);let N=e=>{v(e)},w=async e=>{j(!0);try{let t=await fetch("/api/vote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reference:e.reference,chef_id:null==c?void 0:c.id,email:p,num_votes:b})});(await t.json()).success?(a.ZP.success("Vote successfully submitted!"),r.push("/")):a.ZP.error("Failed to submit vote. Please try again.")}catch(e){console.error("Error submitting vote:",e),a.ZP.error("An error occurred. Please try again.")}finally{j(!1)}};return y?(0,l.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,l.jsx)(i.Z,{size:"large"})}):(0,l.jsx)("div",{className:"h-screen flex items-center justify-center",children:(0,l.jsx)("div",{className:"container bg-white rounded-3xl shadow-xl overflow-hidden w-full mx-4",children:(0,l.jsxs)("div",{className:"md:flex",children:[(0,l.jsxs)("div",{className:"md:w-1/2 p-8 lg:p-12",children:[(0,l.jsxs)("div",{className:"flex items-center mb-8",children:[(0,l.jsx)("div",{className:"relative w-28 h-28 rounded-full overflow-hidden border-4 border-purple-100 shadow-lg",children:(0,l.jsx)(d.default,{src:null==c?void 0:c.image_url,alt:(null==c?void 0:c.name)||"Chef",layout:"fill",objectFit:"cover"})}),(0,l.jsx)("h1",{className:"text-4xl font-bold ml-6 text-purple-900",children:null==c?void 0:c.name})]}),(0,l.jsx)("p",{className:"text-gray-600 mb-8 leading-relaxed text-lg",children:null==c?void 0:c.description}),(0,l.jsxs)("div",{className:"flex items-center text-2xl font-semibold text-purple-700",children:[(0,l.jsx)(u.Z,{className:"mr-3 text-pink-500",size:28}),(0,l.jsxs)("span",{children:["Total Votes: ",null==c?void 0:c.votes]})]})]}),(0,l.jsxs)("div",{className:"md:w-1/2 bg-gradient-to-br from-purple-50 to-pink-50 p-8 lg:p-12",children:[(0,l.jsx)("h2",{className:"text-3xl font-bold mb-8 text-purple-900",children:"Vote Now"}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault()},className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,l.jsx)(f.Z,{className:"mr-2",size:18}),"Email"]}),(0,l.jsx)("input",{type:"email",value:p,onChange:e=>g(e.target.value),placeholder:"Enter your email",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 transition duration-200",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,l.jsx)(m.Z,{className:"mr-2",size:18}),"Number of Votes"]}),(0,l.jsx)("input",{type:"number",min:"1",value:b,onChange:e=>N(Number(e.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 transition duration-200"})]}),(0,l.jsxs)("div",{className:"text-2xl font-semibold text-purple-700 flex items-center",children:["Total Cost: â‚¦",100*b]}),(0,l.jsx)(h,{email:p,numVotes:b,onSuccess:w,onClose:()=>{a.ZP.info("Payment was not completed.")},onError:e=>{console.error("Paystack Error:",e),a.ZP.error("An error occurred during payment. Please try again."),j(!1)}})]})]})]})})})}},6050:function(e,t,r){"use strict";r.d(t,{p4:function(){return a},ug:function(){return i}});var l=r(4975),s=r.n(l);r(257);let n=new(s())({apiKey:"patBtBfFCJp5SO6Sy.fbb521df5ff3aaf6015dc94a59f70f4d5036ecf17ca2ee490d588ffabfdf114a"}).base("appqCMDhZlmWFdnzA"),a=async()=>{try{let e=await n("Chefs").select().all();if(0===e.length)return console.log("No records found in the Airtable base."),[];return e.map(e=>{let t=e.get("image"),r=t&&t.length>0?t[0].url:null;return{id:e.get("id"),name:e.get("name")||"Unnamed Chef",description:e.get("description")||"",image_url:r,votes:e.get("votes")||0}})}catch(e){return console.error("Error fetching chefs:",e),[]}},i=async e=>{try{let t=await n("Chefs").select({filterByFormula:"{id} = ".concat(e)}).all();if(0===t.length)return null;let r=t[0],l=r.get("image"),s=l&&l.length>0?l[0].url:null;return{id:r.get("id"),name:r.get("name")||"Unnamed Chef",description:r.get("description")||"",image_url:s,votes:r.get("votes")||0}}catch(t){return console.error("Error fetching chef with id ".concat(e,":"),t),null}}}},function(e){e.O(0,[145,625,959,971,117,744],function(){return e(e.s=3261)}),_N_E=e.O()}]);